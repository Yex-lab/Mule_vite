import { Module } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { APP_INTERCEPTOR, APP_GUARD } from '@nestjs/core';\nimport { ThrottlerModule, ThrottlerGuard } from '@nestjs/throttler';\nimport { ScheduleModule } from '@nestjs/schedule';\nimport { LoggerModule } from 'nestjs-pino';\nimport { ResponseTransformInterceptor, ValidatorsModule } from '@asyml8/api-core';\n\nimport { LocalDatabaseModule } from './database.module';\nimport { HealthModule } from './modules/health/health.module';\nimport { HelloWorldModule } from './modules/helloworld/helloworld.module';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\n{{#if includeSupabase}}\nimport { AuthModule } from './auth/auth.module';\nimport { JwtAuthGuard } from './auth/guards/jwt-auth.guard';\n{{/if}}\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n      envFilePath: [\n        `.env.${process.env.NODE_ENV || 'development'}`,\n        '.env.local',\n        '.env',\n      ],\n    }),\n    LoggerModule.forRoot({\n      pinoHttp: {\n        level: process.env.LOG_LEVEL || 'info',\n        transport: process.env.LOG_PRETTY === 'true' ? {\n          target: 'pino-pretty',\n          options: {\n            colorize: true,\n            singleLine: true,\n          },\n        } : undefined,\n      },\n    }),\n    ThrottlerModule.forRoot([\n      {\n        ttl: parseInt(process.env.THROTTLE_TTL || '60') * 1000,\n        limit: parseInt(process.env.THROTTLE_LIMIT || '100'),\n      },\n    ]),\n    ScheduleModule.forRoot(),\n    LocalDatabaseModule,\n    HealthModule,\n    HelloWorldModule,\n    ValidatorsModule,\n    {{#if includeSupabase}}\n    AuthModule,\n    {{/if}}\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    {\n      provide: APP_INTERCEPTOR,\n      useClass: ResponseTransformInterceptor,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: ThrottlerGuard,\n    },\n    {{#if includeSupabase}}\n    {\n      provide: APP_GUARD,\n      useClass: JwtAuthGuard,\n    },\n    {{/if}}\n  ],\n})\nexport class AppModule {}