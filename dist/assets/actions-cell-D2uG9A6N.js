import{ar as be,as as me,r as d,at as je,j as e,bN as Ne,au as fe,av as ye,aw as Ce,ax as Qe,bO as Ue,B as u,bP as _e,bQ as M,bR as Ge,bS as ve,bI as F,bT as ee,aQ as Ve,bU as Je,I as T,aB as O,aR as Z,b as q,bM as Ke,bV as _,bW as B,T as W,bX as Xe,bE as Ye,br as Ze,bs as qe,bt as et,bu as tt,bf as st,ap as at,bY as ke,bZ as nt,bJ as Y,b_ as lt,b$ as rt,c0 as ot}from"./index-DzR_SryQ.js";import{T as it,a as ct}from"./Tabs-BwSGSZfk.js";function dt(a){return be("MuiTable",a)}me("MuiTable",["root","stickyHeader"]);const ht=a=>{const{classes:r,stickyHeader:o}=a;return Ce({root:["root",o&&"stickyHeader"]},dt,r)},xt=fe("table",{name:"MuiTable",slot:"Root",overridesResolver:(a,r)=>{const{ownerState:o}=a;return[r.root,o.stickyHeader&&r.stickyHeader]}})(Qe(({theme:a})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...a.typography.body2,padding:a.spacing(2),color:(a.vars||a).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:r})=>r.stickyHeader,style:{borderCollapse:"separate"}}]}))),pe="table",ue=d.forwardRef(function(r,o){const i=je({props:r,name:"MuiTable"}),{className:c,component:h=pe,padding:x="normal",size:t="medium",stickyHeader:s=!1,...v}=i,b={...i,component:h,padding:x,size:t,stickyHeader:s},j=ht(b),C=d.useMemo(()=>({padding:x,size:t,stickyHeader:s}),[x,t,s]);return e.jsx(Ne.Provider,{value:C,children:e.jsx(xt,{as:h,role:h===pe?null:"table",ref:o,className:ye(j.root,c),ownerState:b,...v})})});function pt(a){return be("MuiTableBody",a)}me("MuiTableBody",["root"]);const ut=a=>{const{classes:r}=a;return Ce({root:["root"]},pt,r)},gt=fe("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),bt={variant:"body"},ge="tbody",Te=d.forwardRef(function(r,o){const i=je({props:r,name:"MuiTableBody"}),{className:c,component:h=ge,...x}=i,t={...i,component:h},s=ut(t);return e.jsx(Ue.Provider,{value:bt,children:e.jsx(gt,{className:ye(s.root,c),as:h,ref:o,role:h===ge?null:"rowgroup",ownerState:t,...x})})});function mt({searchConfig:a,searchQuery:r,filters:o,canReset:i,actions:c,actionsComponent:h,selectedIds:x,labels:t,onSearchChange:s,onFilterChange:v,onActionsClick:b,onClearAll:j,isLoading:C}){return e.jsxs(u,{sx:{p:2.5,pb:1.5},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[a?.filterOptions?.map(n=>e.jsx(_e,{sx:{minWidth:120},children:C?e.jsx(M,{variant:"rounded",width:120,height:56,sx:{borderRadius:1}}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{children:n.label}),e.jsx(ve,{multiple:!0,label:n.label,value:o[n.value]||[],onChange:m=>v(n.value,m.target.value),renderValue:m=>m.join(", "),children:n.options.map(m=>e.jsxs(F,{value:m,children:[e.jsx(ee,{size:"small",checked:(o[n.value]||[]).includes(m)}),m]},m))})]})},n.value)),C?e.jsx(M,{variant:"rounded",sx:{flexGrow:1,height:56,borderRadius:1}}):e.jsx(Ve,{sx:{flexGrow:1},value:r,onChange:n=>s(n.target.value),placeholder:t?.search||a?.placeholder||"Search...",InputProps:{startAdornment:e.jsx(Je,{position:"start",children:e.jsx(T,{icon:"eva:search-fill"})})}}),h||e.jsx(e.Fragment,{children:c&&c.length>0&&e.jsx(O,{onClick:b,children:e.jsx(T,{icon:"eva:more-vertical-fill"})})})]}),i&&e.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:1},children:[Object.entries(o).map(([n,m])=>{const P=a?.filterOptions?.find(k=>k.value===n);return m.length===0?null:e.jsxs(u,{sx:{display:"flex",overflow:"hidden",gap:1,p:1,borderRadius:1,border:k=>`dashed 1px ${k.palette.divider}`},children:[e.jsxs(u,{component:"span",sx:{height:24,lineHeight:"24px",fontSize:"0.875rem",fontWeight:600},children:[P?.label||n,":"]}),e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:m.map(k=>e.jsx(Z,{label:k,onDelete:()=>{const f=o[n].filter(te=>te!==k);v(n,f)},size:"small",sx:{bgcolor:"action.selected",color:f=>f.vars?.palette.text.primary||"text.primary","& .MuiChip-deleteIcon":{fontSize:"1rem",color:f=>f.vars?.palette.text.secondary||"text.secondary"}}},k))})]},n)}),r&&e.jsxs(u,{sx:{display:"flex",overflow:"hidden",gap:1,p:1,borderRadius:1,border:n=>`dashed 1px ${n.palette.divider}`},children:[e.jsx(u,{component:"span",sx:{height:24,lineHeight:"24px",fontSize:"0.875rem",fontWeight:600},children:"Keyword:"}),e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.jsx(Z,{label:r,onDelete:()=>s(""),size:"small",sx:{bgcolor:"action.selected",color:n=>n.vars?.palette.text.primary||"text.primary","& .MuiChip-deleteIcon":{fontSize:"1rem",color:n=>n.vars?.palette.text.secondary||"text.secondary"}}})})]}),e.jsx(q,{size:"small",color:"error",onClick:j,startIcon:e.jsx(T,{icon:"solar:trash-bin-trash-bold"}),children:t?.clear||"Clear"})]})]})}function jt({filterTabs:a,activeTab:r,sortedDataLength:o,labels:i,getTabCount:c,onTabChange:h,isLoading:x}){return e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${t.palette.divider}`},children:[e.jsx(it,{value:r,onChange:(t,s)=>h(s),sx:{px:{md:2.5},minHeight:54,"& .MuiTab-root":{minHeight:54,py:.5,transition:"color 0.2s ease",textTransform:"none",color:t=>t.vars?.palette.text.secondary,"&:hover":{backgroundColor:"transparent",color:t=>t.vars?.palette.text.primary},"&.Mui-selected":{backgroundColor:"transparent",color:t=>t.vars?.palette.text.primary}}},children:a.map(t=>e.jsx(ct,{iconPosition:"end",value:t.id,label:t.label,icon:x?e.jsx(M,{variant:"rounded",width:32,height:22,sx:{borderRadius:1}}):e.jsx(Ke,{variant:t.id===r?"filled":"soft",color:t.color||"default",children:c(t)})},t.id))}),x?e.jsx(M,{variant:"rounded",width:160,height:32,sx:{borderRadius:2}}):e.jsx(Z,{icon:e.jsx(T,{icon:"solar:document-text-bold-duotone",width:18}),label:`${i?.resultsFound||"Results Found"} ${o}`,sx:{bgcolor:"background.paper",border:1,borderColor:"divider",fontWeight:500}})]})}function ft({columns:a,displayData:r,isLoading:o,enableSelection:i,selected:c,dense:h,emptyMessage:x,getRowId:t,onRowClick:s,onSelectOne:v}){return e.jsx(Te,{children:r.length===0?e.jsx(_,{children:e.jsx(B,{colSpan:a.length+(i?1:0),align:"center",sx:{py:8},children:e.jsx(W,{variant:"body2",color:"text.secondary",children:x})})}):r.map(b=>{const j=t(b),C=c.includes(j);return e.jsxs(_,{hover:!0,selected:C,onClick:()=>s?.(b),sx:{height:h?56:76,cursor:s?"pointer":"default",...C&&{bgcolor:"action.hover"}},children:[i&&e.jsx(B,{padding:"checkbox",onClick:n=>n.stopPropagation(),children:e.jsx(ee,{size:"small",checked:C,onChange:n=>{n.stopPropagation(),v(j)}})}),a.map(n=>e.jsx(B,{sx:{width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth},children:n.render?n.render(b[n.id],b):String(b[n.id]??"")},String(n.id)))]},j)})})}function yt({columns:a,rows:r=5,enableSelection:o=!0,dense:i=!1}){const c=i?52:72;return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{sx:{bgcolor:h=>h.palette.mode==="dark"?"grey.900":"grey.50"},children:e.jsxs(_,{children:[o&&e.jsx(B,{padding:"checkbox",children:e.jsx(M,{variant:"rectangular",width:18,height:18})}),Array.from({length:a}).map((h,x)=>e.jsx(B,{children:e.jsx(M,{variant:"text",width:"80%",height:24})},x))]})}),e.jsx(Te,{children:Array.from({length:r}).map((h,x)=>e.jsxs(_,{sx:{height:c},children:[o&&e.jsx(B,{padding:"checkbox",children:e.jsx(M,{variant:"rectangular",width:18,height:18})}),Array.from({length:a}).map((t,s)=>e.jsx(B,{children:e.jsx(M,{variant:"text",width:`${60+Math.random()*30}%`,height:20})},s))]},x))})]})}function Ct({enableDense:a,dense:r,rowsPerPage:o,page:i,sortedDataLength:c,labels:h,rowsPerPageOptions:x=[5,10,25],maxPages:t,onDenseChange:s,onRowsPerPageChange:v,onPageChange:b}){const j=Math.ceil(c/o),C=t?Math.min(j,t):j,n=i*o+1,m=Math.min((i+1)*o,c),P=t?Math.min(m,t*o):m,k=t?Math.min(c,t*o):c;return e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.5,py:1,pb:2.5},children:[a&&e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ye,{checked:r,onChange:f=>s(f.target.checked),size:"medium"}),e.jsx(W,{variant:"body2",children:h?.dense||"Dense"})]}),e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(W,{variant:"body2",sx:{color:"text.secondary"},children:[h?.rowsPerPage||"Rows per page",":"]}),e.jsx(ve,{value:o,onChange:f=>{v(Number(f.target.value)),b(0)},size:"small",sx:{minWidth:60},children:x.map(f=>e.jsx(F,{value:f,children:f},f))}),e.jsxs(W,{variant:"body2",sx:{color:"text.secondary"},children:[n,"–",P," of ",k]}),e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(O,{size:"small",disabled:i===0,onClick:()=>b(i-1),children:e.jsx(T,{icon:"eva:arrow-ios-back-fill"})}),e.jsx(O,{size:"small",disabled:i>=C-1,onClick:()=>b(i+1),children:e.jsx(T,{icon:"eva:arrow-ios-forward-fill"})})]})]})]})}function vt({confirmDialog:a,onClose:r,onConfirm:o,cancelLabel:i="Cancel",confirmLabel:c="Confirm",confirmColor:h="error"}){return e.jsxs(Ze,{open:a.open,onClose:r,children:[e.jsx(qe,{children:a.title}),e.jsx(et,{children:a.content}),e.jsxs(tt,{children:[e.jsx(q,{onClick:r,children:i}),e.jsx(q,{onClick:o,color:h,variant:"contained",children:c})]})]})}function St({store:a,queryKey:r,queryFn:o,columns:i,onRowSelect:c,onRowClick:h,getRowId:x,filterTabs:t,searchConfig:s,actions:v,actionsComponent:b,enableSelection:j=!0,enableDense:C=!0,minWidth:n=960,rowsPerPageOptions:m=[5,10,25],maxPages:P,title:k,emptyMessage:f="No data found",loadingMessage:te="Loading...",onToast:we,labels:G={}}){const[y,$]=d.useState([]),[V,N]=d.useState(0),[z,Se]=d.useState(5),[w,De]=d.useState(!1),[H,Ie]=d.useState(i[0]?.id),[L,Me]=d.useState("asc"),[J,ze]=d.useState(t?.[0]?.id||"all"),[S,se]=d.useState(""),[A,ae]=d.useState({}),Ae=d.useCallback(l=>{se(l),s?.onSearchChange?.(l)},[s]),[ne,le]=d.useState(null),[re,oe]=d.useState({open:!1,title:"",content:null,action:()=>{}}),ie=d.useRef(null),Re=st({queryKey:r||[],queryFn:o||(()=>Promise.resolve([])),enabled:!a&&!!r&&!!o}),Be=a?.useQuery(),{data:E=[],isLoading:I,error:kt}=a?Be:Re,ce=d.useMemo(()=>!t||t.length===0?E||[]:t.find(p=>p.id===J)?.filter(E||[])||E||[],[E,t,J]),Q=d.useMemo(()=>{let l=ce||[];return S&&s&&(l=l.filter(p=>s.searchFields.some(g=>String(p[g]).toLowerCase().includes(S.toLowerCase())))),Object.entries(A).forEach(([p,g])=>{g.length>0&&(l=l.filter(D=>g.some(X=>String(D[p]).toLowerCase()===X.toLowerCase())))}),l},[ce,S,s,A]),K=d.useMemo(()=>[...Q].sort((l,p)=>{const g=l[H],D=p[H];return g<D?L==="asc"?-1:1:g>D?L==="asc"?1:-1:0}),[Q,H,L]),He=d.useCallback(l=>{if(I)return 0;let p=l.filter(E);return S&&s&&(p=p.filter(g=>s.searchFields.some(D=>String(g[D]).toLowerCase().includes(S.toLowerCase())))),Object.entries(A).forEach(([g,D])=>{D.length>0&&(p=p.filter(X=>D.some($e=>String(X[g]).toLowerCase()===$e.toLowerCase())))}),p.length},[E,I,S,s,A]),R=K.slice(V*z,V*z+z),Le=d.useCallback(l=>{Me(H===l&&L==="asc"?"desc":"asc"),Ie(l)},[L,H]),de=d.useCallback(l=>{if(l){const p=R.map(x);$(p),c?.(p)}else $([]),c?.([])},[R,x,c]),Ee=d.useCallback(l=>{const p=y.includes(l)?y.filter(g=>g!==l):[...y,l];$(p),c?.(p)},[y,c]),Fe=d.useCallback((l,p)=>{ae(g=>({...g,[l]:p})),N(0)},[]),Pe=l=>{le(l.currentTarget)},U=()=>{le(null)},We=d.useCallback((l,p,g)=>{oe({open:!0,title:l,content:p,action:g})},[]),he=d.useCallback(()=>{oe({open:!1,title:"",content:null,action:()=>{}})},[]),xe=d.useMemo(()=>!!S||Object.values(A).some(l=>l.length>0),[S,A]),Oe=I?[]:R;return!Q.length&&xe||Q.length,e.jsxs(at,{children:[t&&t.length>0&&e.jsx(jt,{filterTabs:t,activeTab:J,sortedDataLength:K.length,labels:G,getTabCount:He,onTabChange:l=>{ze(l),N(0)},isLoading:I}),s&&e.jsx(mt,{searchConfig:s,searchQuery:S,filters:A,canReset:xe,actions:v,actionsComponent:b,selectedIds:y,labels:G,onSearchChange:Ae,onFilterChange:Fe,onActionsClick:Pe,onClearAll:()=>{se(""),ae({}),N(0)},isLoading:I}),e.jsx(ke,{open:!!ne,anchorEl:ne,onClose:U,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsxs(nt,{sx:{py:1},children:[e.jsxs(F,{onClick:()=>{console.log("Print"),U()},children:[e.jsx(u,{sx:{mr:2,display:"flex",alignItems:"center"},children:e.jsx(T,{icon:"solar:pen-bold"})}),e.jsx(Y,{children:"Print"})]}),e.jsxs(F,{onClick:()=>{console.log("Import"),U()},children:[e.jsx(u,{sx:{mr:2,display:"flex",alignItems:"center"},children:e.jsx(T,{icon:"solar:import-bold"})}),e.jsx(Y,{children:"Import"})]}),e.jsxs(F,{onClick:()=>{console.log("Export"),U()},children:[e.jsx(u,{sx:{mr:2,display:"flex",alignItems:"center"},children:e.jsx(T,{icon:"solar:export-bold"})}),e.jsx(Y,{children:"Export"})]})]})}),e.jsxs(u,{sx:{position:"relative"},children:[j&&y.length>0&&e.jsxs(u,{sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:ie.current?.offsetHeight||(w?38:58),display:"flex",position:"absolute",alignItems:"center",bgcolor:l=>l.palette.mode==="dark"?l.palette.primary.dark:l.palette.primary.light},children:[e.jsx(ee,{size:"small",indeterminate:y.length>0&&y.length<R.length,checked:R.length>0&&y.length===R.length,onChange:l=>de(l.target.checked)}),e.jsxs(W,{variant:"subtitle2",sx:{ml:2,flexGrow:1,color:"primary.main",...w&&{ml:3}},children:[y.length," selected"]}),e.jsx(lt,{title:"Delete",children:e.jsx(O,{color:"primary",onClick:()=>{We("Delete",e.jsxs(e.Fragment,{children:["Are you sure you want to delete ",e.jsx("strong",{children:y.length})," items?"]}),()=>{console.log("Delete:",y),$([]),we?.("Items deleted successfully","success")})},children:e.jsx(T,{icon:"solar:trash-bin-trash-bold"})})})]}),e.jsx(ue,{size:w?"small":"medium",sx:{minWidth:n},children:I?e.jsx(yt,{columns:i.length,rows:z,enableSelection:j,dense:w}):e.jsx(rt,{ref:ie,columns:i,enableSelection:j,selected:y,paginatedData:R,dense:w,orderBy:H,order:L,onSelectAll:de,onSort:Le})}),e.jsx(ot,{fillContent:!1,autoHide:!1,sx:{maxHeight:w?z*53+24:z*73+24,"& .simplebar-content":{display:"block"}},children:e.jsx(ue,{size:w?"small":"medium",sx:{minWidth:n},children:!I&&e.jsx(ft,{columns:i,displayData:Oe,isLoading:I,enableSelection:j,selected:y,dense:w,emptyMessage:f,getRowId:x,onRowClick:h,onSelectOne:Ee})})})]}),e.jsx(Ct,{enableDense:C,dense:w,rowsPerPage:z,page:V,sortedDataLength:K.length,labels:G,rowsPerPageOptions:m,maxPages:P,onDenseChange:De,onRowsPerPageChange:Se,onPageChange:N}),e.jsx(vt,{confirmDialog:re,onClose:he,onConfirm:()=>{re.action(),he()}})]})}function Dt({actions:a,moreIcon:r}){const[o,i]=d.useState(null),c=!!o,h=s=>{s.stopPropagation(),i(s.currentTarget)},x=()=>{i(null)},t=s=>{s.onClick(),x()};return e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:h,size:"small","aria-label":"More actions","aria-expanded":c,"aria-haspopup":"true",children:r||"⋮"}),e.jsx(ke,{open:c,anchorEl:o,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:a.map(s=>e.jsxs(F,{onClick:()=>t(s),disabled:s.disabled,sx:{color:s.color==="error"?"error.main":"inherit",minWidth:120},children:[s.icon&&e.jsx("span",{style:{marginRight:8,display:"flex",alignItems:"center"},children:s.icon}),s.label]},s.id))})]})}export{Dt as A,St as D};
