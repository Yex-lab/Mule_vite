import{a8 as G,b6 as Tt,a3 as lt,F as O,K as zt,G as C,b7 as Bt,a6 as W,z as Gt,a5 as $t,b8 as qt,a4 as Ut,b9 as Xt,ba as Mt,n as Yt,h as jt,q as Lt,bb as _,O as Ht,E as Zt,D as Jt,bc as Qt,M as te}from"./index-DzR_SryQ.js";function tt(t){let e;return()=>(e===void 0&&(e=t()),e)}const V=t=>t*1e3,w=t=>t/1e3,bt=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ee=1e-7,ne=12;function ie(t,e,n,i,s){let a,o,r=0;do o=e+(n-e)/2,a=bt(o,i,s)-t,a>0?n=o:e=o;while(Math.abs(a)>ee&&++r<ne);return o}function N(t,e,n,i){if(t===e&&n===i)return G;const s=a=>ie(a,0,1,t,n);return a=>a===0||a===1?a:bt(s(a),e,i)}const Dt=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,At=t=>e=>1-t(1-e),St=N(.33,1.53,.69,.99),et=At(St),vt=Dt(et),xt=t=>(t*=2)<1?.5*et(t):.5*(2-Math.pow(2,-10*(t-1))),nt=t=>1-Math.sin(Math.acos(t)),se=At(nt),wt=Dt(nt),ae=N(.42,0,1,1),re=N(0,0,.58,1),kt=N(.42,0,.58,1),oe=t=>Array.isArray(t)&&typeof t[0]!="number",Ft=t=>Array.isArray(t)&&typeof t[0]=="number",le={linear:G,easeIn:ae,easeInOut:kt,easeOut:re,circIn:nt,circInOut:wt,circOut:se,backIn:et,backInOut:vt,backOut:St,anticipate:xt},ce=t=>typeof t=="string",ct=t=>{if(Ft(t)){Tt(t.length===4);const[e,n,i,s]=t;return N(e,n,i,s)}else if(ce(t))return le[t];return t},ue=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>C.update(e,n),stop:()=>zt(e),now:()=>lt.isProcessing?lt.timestamp:O.now()}},Vt=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)i+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},E=2e4;function it(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<E;)e+=n,i=t.next(e);return e>=E?1/0:e}function he(t,e=100,n){const i=n({...t,keyframes:[0,e]}),s=Math.min(it(i),E);return{type:"keyframes",ease:a=>i.next(s*a).value/e,duration:w(s)}}const fe=5;function Ot(t,e,n){const i=Math.max(e-fe,0);return Bt(n-t(i),e-i)}const g={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$=.001;function de({duration:t=g.duration,bounce:e=g.bounce,velocity:n=g.velocity,mass:i=g.mass}){let s,a,o=1-e;o=W(g.minDamping,g.maxDamping,o),t=W(g.minDuration,g.maxDuration,w(t)),o<1?(s=c=>{const l=c*o,h=l*t,f=l-n,y=q(c,o),D=Math.exp(-h);return $-f/y*D},a=c=>{const h=c*o*t,f=h*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,D=Math.exp(-h),p=q(Math.pow(c,2),o);return(-s(c)+$>0?-1:1)*((f-y)*D)/p}):(s=c=>{const l=Math.exp(-c*t),h=(c-n)*t+1;return-$+l*h},a=c=>{const l=Math.exp(-c*t),h=(n-c)*(t*t);return l*h});const r=5/t,u=pe(s,a,r);if(t=V(t),isNaN(u))return{stiffness:g.stiffness,damping:g.damping,duration:t};{const c=Math.pow(u,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const me=12;function pe(t,e,n){let i=n;for(let s=1;s<me;s++)i=i-t(i)/e(i);return i}function q(t,e){return t*Math.sqrt(1-e*e)}const ye=["duration","bounce"],ge=["stiffness","damping","mass"];function ut(t,e){return e.some(n=>t[n]!==void 0)}function Te(t){let e={velocity:g.velocity,stiffness:g.stiffness,damping:g.damping,mass:g.mass,isResolvedFromDuration:!1,...t};if(!ut(t,ge)&&ut(t,ye))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,a=2*W(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:g.mass,stiffness:s,damping:a}}else{const n=de(t);e={...e,...n,mass:g.mass},e.isResolvedFromDuration=!0}return e}function z(t=g.visualDuration,e=g.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],r={done:!1,value:a},{stiffness:u,damping:c,mass:l,duration:h,velocity:f,isResolvedFromDuration:y}=Te({...n,velocity:-w(n.velocity||0)}),D=f||0,p=c/(2*Math.sqrt(u*l)),M=o-a,T=w(Math.sqrt(u/l)),S=Math.abs(M)<5;i||(i=S?g.restSpeed.granular:g.restSpeed.default),s||(s=S?g.restDelta.granular:g.restDelta.default);let v;if(p<1){const d=q(T,p);v=b=>{const A=Math.exp(-p*T*b);return o-A*((D+p*T*M)/d*Math.sin(d*b)+M*Math.cos(d*b))}}else if(p===1)v=d=>o-Math.exp(-T*d)*(M+(D+T*M)*d);else{const d=T*Math.sqrt(p*p-1);v=b=>{const A=Math.exp(-p*T*b),m=Math.min(d*b,300);return o-A*((D+p*T*M)*Math.sinh(m)+d*M*Math.cosh(m))/d}}const k={calculatedDuration:y&&h||null,next:d=>{const b=v(d);if(y)r.done=d>=h;else{let A=d===0?D:0;p<1&&(A=d===0?V(D):Ot(v,d,b));const m=Math.abs(A)<=i,x=Math.abs(o-b)<=s;r.done=m&&x}return r.value=r.done?o:b,r},toString:()=>{const d=Math.min(it(k),E),b=Vt(A=>k.next(d*A).value,d,30);return d+"ms "+b},toTransition:()=>{}};return k}z.applyToOptions=t=>{const e=he(t,100,z);return t.ease=e.ease,t.duration=V(e.duration),t.type="keyframes",t};function U({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:r,max:u,restDelta:c=.5,restSpeed:l}){const h=t[0],f={done:!1,value:h},y=m=>r!==void 0&&m<r||u!==void 0&&m>u,D=m=>r===void 0?u:u===void 0||Math.abs(r-m)<Math.abs(u-m)?r:u;let p=n*e;const M=h+p,T=o===void 0?M:o(M);T!==M&&(p=T-h);const S=m=>-p*Math.exp(-m/i),v=m=>T+S(m),k=m=>{const x=S(m),F=v(m);f.done=Math.abs(x)<=c,f.value=f.done?T:F};let d,b;const A=m=>{y(f.value)&&(d=m,b=z({keyframes:[f.value,D(f.value)],velocity:Ot(v,m,f.value),damping:s,stiffness:a,restDelta:c,restSpeed:l}))};return A(0),{calculatedDuration:null,next:m=>{let x=!1;return!b&&d===void 0&&(x=!0,k(m),A(m)),d!==void 0&&m>=d?b.next(m-d):(!x&&k(m),f)}}}function Me(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=$t(0,e,i);t.push(Gt(n,1,s))}}function be(t){const e=[0];return Me(e,t.length-1),e}function De(t,e){return t.map(n=>n*e)}function Ae(t,e){return t.map(()=>e||kt).splice(0,t.length-1)}function R({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=oe(i)?i.map(ct):ct(i),a={done:!1,value:e[0]},o=De(n&&n.length===e.length?n:be(e),t),r=qt(o,e,{ease:Array.isArray(s)?s:Ae(e,s)});return{calculatedDuration:t,next:u=>(a.value=r(u),a.done=u>=t,a)}}const Se=t=>t!==null;function st(t,{repeat:e,repeatType:n="loop"},i,s=1){const a=t.filter(Se),r=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!r||i===void 0?a[r]:i}const ve={decay:U,inertia:U,tween:R,keyframes:R,spring:z};function Kt(t){typeof t.type=="string"&&(t.type=ve[t.type])}class at{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xe=t=>t/100;class rt extends at{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==O.now()&&this.tick(O.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Kt(e);const{type:n=R,repeat:i=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:r}=e;const u=n||R;u!==R&&typeof r[0]!="number"&&(this.mixKeyframes=Ut(xe,Xt(r[0],r[1])),r=[0,100]);const c=u({...e,keyframes:r});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...r].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=it(c));const{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:r,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:l,repeat:h,repeatType:f,repeatDelay:y,type:D,onUpdate:p,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,k=i;if(h){const m=Math.min(this.currentTime,s)/r;let x=Math.floor(m),F=m%1;!F&&m>=1&&(F=1),F===1&&x--,x=Math.min(x,h+1),!!(x%2)&&(f==="reverse"?(F=1-F,y&&(F-=y/r)):f==="mirror"&&(k=o)),v=W(0,1,F)*r}const d=S?{done:!1,value:l[0]}:k.next(v);a&&(d.value=a(d.value));let{done:b}=d;!S&&u!==null&&(b=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return A&&D!==U&&(d.value=st(l,this.options,M,this.speed)),p&&p(d.value),A&&this.finish(),d}then(e,n){return this.finished.then(e,n)}get duration(){return w(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+w(e)}get time(){return w(this.currentTime)}set time(e){e=V(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(O.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=w(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ue,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(O.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function we(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const K=t=>t*180/Math.PI,X=t=>{const e=K(Math.atan2(t[1],t[0]));return Y(e)},ke={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:X,rotateZ:X,skewX:t=>K(Math.atan(t[1])),skewY:t=>K(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Y=t=>(t=t%360,t<0&&(t+=360),t),ht=X,ft=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),dt=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Fe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ft,scaleY:dt,scale:t=>(ft(t)+dt(t))/2,rotateX:t=>Y(K(Math.atan2(t[6],t[5]))),rotateY:t=>Y(K(Math.atan2(-t[2],t[0]))),rotateZ:ht,rotate:ht,skewX:t=>K(Math.atan(t[4])),skewY:t=>K(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function mt(t){return t.includes("scale")?1:0}function j(t,e){if(!t||t==="none")return mt(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=Fe,s=n;else{const r=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=ke,s=r}if(!s)return mt(e);const a=i[e],o=s[1].split(",").map(Ve);return typeof a=="function"?a(o):o[a]}const An=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return j(n,e)};function Ve(t){return parseFloat(t.trim())}const Sn=t=>t===Yt||t===jt,Oe=new Set(["x","y","z"]),Ke=Mt.filter(t=>!Oe.has(t));function Pe(t){const e=[];return Ke.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const B={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>j(e,"x"),y:(t,{transform:e})=>j(e,"y")};B.translateX=B.x;B.translateY=B.y;const P=new Set;let L=!1,H=!1,Z=!1;function Pt(){if(H){const t=Array.from(P).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=Pe(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([a,o])=>{i.getValue(a)?.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}H=!1,L=!1,P.forEach(t=>t.complete(Z)),P.clear()}function Ct(){P.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(H=!0)})}function Ce(){Z=!0,Ct(),Pt(),Z=!1}class Ie{constructor(e,n,i,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(P.add(this),L||(L=!0,C.read(Ct),C.resolveKeyframes(Pt))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const a=s?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const r=i.readValue(n,o);r!=null&&(e[0]=r)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}we(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),P.delete(this)}cancel(){this.state==="scheduled"&&(P.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Re=t=>t.startsWith("--");function _e(t,e,n){Re(e)?t.style.setProperty(e,n):t.style[e]=n}const Ne=tt(()=>window.ScrollTimeline!==void 0),We={};function Ee(t,e){const n=tt(t);return()=>We[e]??n()}const It=Ee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),I=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,pt={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:I([0,.65,.55,1]),circOut:I([.55,0,1,.45]),backIn:I([.31,.01,.66,-.59]),backOut:I([.33,1.53,.69,.99])};function Rt(t,e){if(t)return typeof t=="function"?It()?Vt(t,e):"ease-out":Ft(t)?I(t):Array.isArray(t)?t.map(n=>Rt(n,e)||pt.easeOut):pt[t]}function ze(t,e,n,{delay:i=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:r="easeOut",times:u}={},c=void 0){const l={[e]:n};u&&(l.offset=u);const h=Rt(r,s);Array.isArray(h)&&(l.easing=h);const f={delay:i,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),t.animate(l,f)}function _t(t){return typeof t=="function"&&"applyToOptions"in t}function Be({type:t,...e}){return _t(t)&&It()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Ge extends at{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:r,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Tt(typeof e.type!="string");const c=Be(e);this.animation=ze(n,i,s,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const l=st(s,this.options,r,this.speed);this.updateMotionValue?this.updateMotionValue(l):_e(n,i,l),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return w(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+w(e)}get time(){return w(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=V(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Ne()?(this.animation.timeline=e,G):n(this)}}const Nt={anticipate:xt,backInOut:vt,circInOut:wt};function $e(t){return t in Nt}function qe(t){typeof t.ease=="string"&&$e(t.ease)&&(t.ease=Nt[t.ease])}const yt=10;class Ue extends Ge{constructor(e){qe(e),Kt(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const r=new rt({...o,autoplay:!1}),u=V(this.finishedTime??this.time);n.setWithVelocity(r.sample(u-yt).value,r.sample(u).value,yt),r.stop()}}const gt=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Lt.test(t)||t==="0")&&!t.startsWith("url("));function Xe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Ye(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=gt(s,e),r=gt(a,e);return!o||!r?!1:Xe(t)||(n==="spring"||_t(n))&&i}function J(t){t.duration=0,t.type="keyframes"}const je=new Set(["opacity","clipPath","filter","transform"]),Le=tt(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function He(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=e.owner.getProps();return Le()&&n&&je.has(n)&&(n!=="transform"||!c)&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}const Ze=40;class Je extends at{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:r,name:u,motionValue:c,element:l,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=O.now();const f={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:a,repeatType:o,name:u,motionValue:c,element:l,...h},y=l?.KeyframeResolver||Ie;this.keyframeResolver=new y(r,(D,p,M)=>this.onKeyframesResolved(D,p,f,!M),u,c,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:r,delay:u,isHandoff:c,onUpdate:l}=i;this.resolvedAt=O.now(),Ye(e,a,o,r)||((_.instantAnimations||!u)&&l?.(st(e,i,n)),e[0]=e[e.length-1],J(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Ze?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},y=!c&&He(f)?new Ue({...f,element:f.motionValue.owner.current}):new rt(f);y.finished.then(()=>this.notifyFinished()).catch(G),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ce()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function Wt(t,e){return t?.[e]??t?.default??t}const Qe=new Set(["width","height","top","left","right","bottom",...Mt]);function ot(t,e,n){const i=t.getProps();return Ht(i,e,n!==void 0?n:i.custom,t)}const tn=t=>Array.isArray(t);function en(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zt(n))}function nn(t){return tn(t)?t[t.length-1]||0:t}function sn(t,e){const n=ot(t,e);let{transitionEnd:i={},transition:s={},...a}=n||{};a={...a,...i};for(const o in a){const r=nn(a[o]);en(t,o,r)}}function an(t){return!!(Jt(t)&&t.add)}function rn(t,e){const n=t.getValue("willChange");if(an(n))return n.add(e);if(!n&&_.WillChange){const i=new _.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function on(t){return t.props[Qt]}const ln=t=>t!==null;function cn(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(ln),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const un={type:"spring",stiffness:500,damping:25,restSpeed:10},hn=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fn={type:"keyframes",duration:.8},dn={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mn=(t,{keyframes:e})=>e.length>2?fn:te.has(t)?t.startsWith("scale")?hn(e[1]):un:dn;function pn({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:r,from:u,elapsed:c,...l}){return!!Object.keys(l).length}const yn=(t,e,n,i={},s,a)=>o=>{const r=Wt(i,t)||{},u=r.delay||i.delay||0;let{elapsed:c=0}=i;c=c-V(u);const l={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...r,delay:-c,onUpdate:f=>{e.set(f),r.onUpdate&&r.onUpdate(f)},onComplete:()=>{o(),r.onComplete&&r.onComplete()},name:t,motionValue:e,element:a?void 0:s};pn(r)||Object.assign(l,mn(t,l)),l.duration&&(l.duration=V(l.duration)),l.repeatDelay&&(l.repeatDelay=V(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let h=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(J(l),l.delay===0&&(h=!0)),(_.instantAnimations||_.skipAnimations)&&(h=!0,J(l),l.delay=0),l.allowFlatten=!r.type&&!r.ease,h&&!a&&e.get()!==void 0){const f=cn(l.keyframes,r);if(f!==void 0){C.update(()=>{l.onUpdate(f),l.onComplete()});return}}return r.isSync?new rt(l):new Je(l)};function gn({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Et(t,e,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...r}=e;i&&(a=i);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const l in r){const h=t.getValue(l,t.latestValues[l]??null),f=r[l];if(f===void 0||c&&gn(c,l))continue;const y={delay:n,...Wt(a||{},l)},D=h.get();if(D!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===D&&!y.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const T=on(t);if(T){const S=window.MotionHandoffAnimation(T,l,C);S!==null&&(y.startTime=S,p=!0)}}rn(t,l),h.start(yn(l,h,f,t.shouldReduceMotion&&Qe.has(l)?{type:!1}:y,t,p));const M=h.animation;M&&u.push(M)}return o&&Promise.all(u).then(()=>{C.update(()=>{o&&sn(t,o)})}),u}function Tn(t,e,n,i=0,s=1){const a=Array.from(t).sort((c,l)=>c.sortNodePosition(l)).indexOf(e),o=t.size,r=(o-1)*i;return typeof n=="function"?n(a,o):s===1?a*i:r-a*i}function Q(t,e,n={}){const i=ot(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(Et(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:l,staggerDirection:h}=s;return Mn(t,e,u,c,l,h,n)}:()=>Promise.resolve(),{when:r}=s;if(r){const[u,c]=r==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(n.delay)])}function Mn(t,e,n=0,i=0,s=0,a=1,o){const r=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),r.push(Q(u,e,{...o,delay:n+(typeof i=="function"?0:i)+Tn(t.variantChildren,u,i,s,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(r)}function vn(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(a=>Q(t,a,n));i=Promise.all(s)}else if(typeof e=="string")i=Q(t,e,n);else{const s=typeof e=="function"?ot(t,e,n.custom):e;i=Promise.all(Et(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}export{Ie as K,B as a,tn as b,ot as c,mt as d,Tn as e,vn as f,rn as g,yn as h,Sn as i,se as j,Wt as k,on as l,w as m,sn as n,Qe as p,An as r,V as s};
