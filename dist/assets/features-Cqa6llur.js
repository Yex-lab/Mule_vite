import{K as Fe,p as Bi,i as Ut,a as lt,d as ji,r as ki,b as Nt,c as ut,e as Ii,f as Fi,s as Oi,m as Ui,g as Gt,h as Oe,j as Ni,k as Gi,l as Ki}from"./visual-element-ssD_hB3Y.js";import{i as Ue,n as Wi,h as Et,k as _,l as Hi,v as $i,o as zi,q as H,s as Xi,t as R,w as Yi,x as _i,y as qi,z as T,A as Zi,D as B,E as q,F as bt,G as S,H as Ji,J as Qi,K as O,M as Rt,N as Kt,O as ts,P as Ne,Q as es,U as is,V as ss,W as Ge,X as ns,Y as os,Z as rs,_ as as,r as nt,$ as Ke,a0 as We,a1 as He,a2 as $e,a3 as C,a4 as ze,a5 as Tt,a6 as Xe,a7 as tt,a8 as W,a9 as ls,j as us,aa as cs,ab as hs,ac as Ye,ad as _e,ae as ct,af as ht,ag as Wt}from"./index-DzR_SryQ.js";import{i as ds,a as fs,u as ps}from"./use-presence-BIOmTntf.js";const qe=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Ze=e=>/^0[^.\s]+$/u.test(e),ms=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gs(e){const t=ms.exec(e);if(!t)return[,];const[,i,s,o]=t;return[`--${i??s}`,o]}function Je(e,t,i=1){const[s,o]=gs(e);if(!s)return;const l=window.getComputedStyle(t).getPropertyValue(s);if(l){const n=l.trim();return qe(n)?parseFloat(n):n}return Ue(o)?Je(o,t,i+1):o}const ys={test:e=>e==="auto",parse:e=>e},Qe=e=>t=>t.test(e),ti=[Wi,Et,_,Hi,$i,zi,ys],Ht=e=>ti.find(Qe(e));function vs(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Ze(e):!0}const xs=new Set(["brightness","contrast","saturate","opacity"]);function Ps(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=i.match(Xi)||[];if(!s)return e;const o=i.replace(s,"");let l=xs.has(t)?1:0;return s!==i&&(l*=100),t+"("+l+o+")"}const Ts=/\b([a-z-]*)\(.*?\)/gu,Vt={...H,getAnimatableNone:e=>{const t=e.match(Ts);return t?t.map(Ps).join(" "):e}},Vs={...Yi,color:R,backgroundColor:R,outlineColor:R,fill:R,stroke:R,borderColor:R,borderTopColor:R,borderRightColor:R,borderBottomColor:R,borderLeftColor:R,filter:Vt,WebkitFilter:Vt},ei=e=>Vs[e];function ii(e,t){let i=ei(e);return i!==Vt&&(i=H),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const Ss=new Set(["auto","none","0"]);function As(e,t,i){let s=0,o;for(;s<e.length&&!o;){const l=e[s];typeof l=="string"&&!Ss.has(l)&&_i(l).values.length&&(o=e[s]),s++}if(o&&i)for(const l of t)e[l]=ii(i,o)}class Cs extends Fe{constructor(t,i,s,o,l){super(t,i,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let r=0;r<t.length;r++){let u=t[r];if(typeof u=="string"&&(u=u.trim(),Ue(u))){const c=Je(u,i.current);c!==void 0&&(t[r]=c),r===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Bi.has(s)||t.length!==2)return;const[o,l]=t,n=Ht(o),a=Ht(l);if(n!==a)if(Ut(n)&&Ut(a))for(let r=0;r<t.length;r++){const u=t[r];typeof u=="string"&&(t[r]=parseFloat(u))}else lt[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,s=[];for(let o=0;o<t.length;o++)(t[o]===null||vs(t[o]))&&s.push(o);s.length&&As(t,s,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const o=i[i.length-1];o!==void 0&&t.getValue(s,o).jump(o,!1)}measureEndState(){const{element:t,name:i,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const o=t.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,n=s[l];s[l]=lt[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,r])=>{t.getValue(a).set(r)}),this.resolveNoneKeyframes()}}function ws(e,t,i){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const o=i?.[e]??s.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const{schedule:Lt}=qi(queueMicrotask,!1),L={x:!1,y:!1};function si(){return L.x||L.y}function Ds(e){return e==="x"||e==="y"?L[e]?null:(L[e]=!0,()=>{L[e]=!1}):L.x||L.y?null:(L.x=L.y=!0,()=>{L.x=L.y=!1})}function ni(e,t){const i=ws(e),s=new AbortController,o={passive:!0,...t,signal:s.signal};return[i,o,()=>s.abort()]}function $t(e){return!(e.pointerType==="touch"||si())}function Es(e,t,i={}){const[s,o,l]=ni(e,i),n=a=>{if(!$t(a))return;const{target:r}=a,u=t(r,a);if(typeof u!="function"||!r)return;const c=h=>{$t(h)&&(u(h),r.removeEventListener("pointerleave",c))};r.addEventListener("pointerleave",c,o)};return s.forEach(a=>{a.addEventListener("pointerenter",n,o)}),l}const oi=(e,t)=>t?e===t?!0:oi(e,t.parentElement):!1,Mt=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,bs=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rs(e){return bs.has(e.tagName)||e.tabIndex!==-1}const it=new WeakSet;function zt(e){return t=>{t.key==="Enter"&&e(t)}}function dt(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ls=(e,t)=>{const i=e.currentTarget;if(!i)return;const s=zt(()=>{if(it.has(i))return;dt(i,"down");const o=zt(()=>{dt(i,"up")}),l=()=>dt(i,"cancel");i.addEventListener("keyup",o,t),i.addEventListener("blur",l,t)});i.addEventListener("keydown",s,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),t)};function Xt(e){return Mt(e)&&!si()}function Ms(e,t,i={}){const[s,o,l]=ni(e,i),n=a=>{const r=a.currentTarget;if(!Xt(a))return;it.add(r);const u=t(r,a),c=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),it.has(r)&&it.delete(r),Xt(f)&&typeof u=="function"&&u(f,{success:m})},h=f=>{c(f,r===window||r===document||i.useGlobalTarget||oi(r,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",d,o)};return s.forEach(a=>{(i.useGlobalTarget?window:a).addEventListener("pointerdown",n,o),ds(a)&&(a.addEventListener("focus",u=>Ls(u,o)),!Rs(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),l}function ri(e){return fs(e)&&"ownerSVGElement"in e}function Bs(e){return ri(e)&&e.tagName==="svg"}const js=[...ti,R,H],ks=e=>js.find(Qe(e));function ai({top:e,left:t,right:i,bottom:s}){return{x:{min:t,max:i},y:{min:e,max:s}}}function Is({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Fs(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}function ft(e){return e===void 0||e===1}function St({scale:e,scaleX:t,scaleY:i}){return!ft(e)||!ft(t)||!ft(i)}function F(e){return St(e)||li(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function li(e){return Yt(e.x)||Yt(e.y)}function Yt(e){return e&&e!=="0%"}function ot(e,t,i){const s=e-i,o=t*s;return i+o}function _t(e,t,i,s,o){return o!==void 0&&(e=ot(e,o,s)),ot(e,i,s)+t}function At(e,t=0,i=1,s,o){e.min=_t(e.min,t,i,s,o),e.max=_t(e.max,t,i,s,o)}function ui(e,{x:t,y:i}){At(e.x,t.translate,t.scale,t.originPoint),At(e.y,i.translate,i.scale,i.originPoint)}const qt=.999999999999,Zt=1.0000000000001;function Os(e,t,i,s=!1){const o=i.length;if(!o)return;t.x=t.y=1;let l,n;for(let a=0;a<o;a++){l=i[a],n=l.projectionDelta;const{visualElement:r}=l.options;r&&r.props.style&&r.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&G(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,ui(e,n)),s&&F(l.latestValues)&&G(e,l.latestValues))}t.x<Zt&&t.x>qt&&(t.x=1),t.y<Zt&&t.y>qt&&(t.y=1)}function N(e,t){e.min=e.min+t,e.max=e.max+t}function Jt(e,t,i,s,o=.5){const l=T(e.min,e.max,o);At(e,t,i,l,s)}function G(e,t){Jt(e.x,t.x,t.scaleX,t.scale,t.originX),Jt(e.y,t.y,t.scaleY,t.scale,t.originY)}function ci(e,t){return ai(Fs(e.getBoundingClientRect(),t))}function Us(e,t,i){const s=ci(e,i),{scroll:o}=t;return o&&(N(s.x,o.offset.x),N(s.y,o.offset.y)),s}const Qt=()=>({translate:0,scale:1,origin:0,originPoint:0}),K=()=>({x:Qt(),y:Qt()}),te=()=>({min:0,max:0}),P=()=>({x:te(),y:te()}),Ct={current:null},hi={current:!1};function Ns(){if(hi.current=!0,!!Zi)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ct.current=e.matches;e.addEventListener("change",t),t()}else Ct.current=!1}const Gs=new WeakMap;function Ks(e,t,i){for(const s in t){const o=t[s],l=i[s];if(B(o))e.addValue(s,o);else if(B(l))e.addValue(s,q(o,{owner:e}));else if(l!==o)if(e.hasValue(s)){const n=e.getValue(s);n.liveStyle===!0?n.jump(o):n.hasAnimated||n.set(o)}else{const n=e.getStaticValue(s);e.addValue(s,q(n!==void 0?n:o,{owner:e}))}}for(const s in i)t[s]===void 0&&e.removeValue(s);return t}const ee=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ws{scrapeMotionValuesFromProps(t,i,s){return{}}constructor({parent:t,props:i,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:l,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fe,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=bt.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,S.render(this.render,!1,!0))};const{latestValues:r,renderState:u}=n;this.latestValues=r,this.baseTarget={...r},this.initialValues=i.initial?{...r}:{},this.renderState=u,this.parent=t,this.props=i,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!l,this.isControllingVariants=Ji(i),this.isVariantNode=Qi(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(i,{},this);for(const d in h){const f=h[d];r[d]!==void 0&&B(f)&&f.set(r[d])}}mount(t){this.current=t,Gs.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),hi.current||Ns(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ct.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),O(this.notifyUpdate),O(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Rt.has(t);s&&this.onBindTransform&&this.onBindTransform();const o=i.on("change",n=>{this.latestValues[t]=n,this.props.onUpdate&&S.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{o(),l&&l(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kt){const i=Kt[t];if(!i)continue;const{isEnabled:s,Feature:o}=i;if(!this.features[t]&&o&&s(this.props)&&(this.features[t]=new o(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):P()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<ee.length;s++){const o=ee[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,n=t[l];n&&(this.propEventSubscriptions[o]=this.on(o,n))}this.prevMotionValues=Ks(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const s=this.values.get(t);i!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&i!==void 0&&(s=q(i===null?void 0:i,{owner:this}),this.addValue(t,s)),s}readValue(t,i){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(qe(s)||Ze(s))?s=parseFloat(s):!ks(s)&&H.test(i)&&(s=ii(t,i)),this.setBaseTarget(t,B(s)?s.get():s)),B(s)?s.get():s}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const l=ts(this.props,i,this.presenceContext?.custom);l&&(s=l[t])}if(i&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!B(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new Ne),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}scheduleRenderMicrotask(){Lt.render(this.render)}}class di extends Ws{constructor(){super(...arguments),this.KeyframeResolver=Cs}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:s}){delete i[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;B(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function fi(e,{style:t,vars:i},s,o){const l=e.style;let n;for(n in t)l[n]=t[n];o?.applyProjectionStyles(l,s);for(n in i)l.setProperty(n,i[n])}function Hs(e){return window.getComputedStyle(e)}class $s extends di{constructor(){super(...arguments),this.type="html",this.renderInstance=fi}readValueFromInstance(t,i){if(Rt.has(i))return this.projection?.isProjecting?ji(i):ki(t,i);{const s=Hs(t),o=(es(i)?s.getPropertyValue(i):s[i])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:i}){return ci(t,i)}build(t,i,s){is(t,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,i,s){return ss(t,i,s)}}const pi=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zs(e,t,i,s){fi(e,t,void 0,s);for(const o in t.attrs)e.setAttribute(pi.has(o)?o:Ge(o),t.attrs[o])}class Xs extends di{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=P}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(Rt.has(i)){const s=ei(i);return s&&s.default||0}return i=pi.has(i)?i:Ge(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,s){return ns(t,i,s)}build(t,i,s){os(t,i,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,i,s,o){zs(t,i,s,o)}mount(t){this.isSVGTag=rs(t.tagName),super.mount(t)}}const Ys=(e,t)=>as(e)?new Xs(t):new $s(t,{allowProjection:e!==nt.Fragment});function mi(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(t[s]!==e[s])return!1;return!0}const _s=We.length;function gi(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?gi(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<_s;i++){const s=We[i],o=e.props[s];(Ke(o)||o===!1)&&(t[s]=o)}return t}const qs=[...$e].reverse(),Zs=$e.length;function Js(e){return t=>Promise.all(t.map(({animation:i,options:s})=>Fi(e,i,s)))}function Qs(e){let t=Js(e),i=ie(),s=!0;const o=r=>(u,c)=>{const h=ut(e,c,r==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:d,transitionEnd:f,...m}=h;u={...u,...m,...f}}return u};function l(r){t=r(e)}function n(r){const{props:u}=e,c=gi(e.parent)||{},h=[],d=new Set;let f={},m=1/0;for(let v=0;v<Zs;v++){const p=qs[v],g=i[p],y=u[p]!==void 0?u[p]:c[p],w=Ke(y),M=p===r?g.isActive:null;M===!1&&(m=v);let Q=y===c[p]&&y!==u[p]&&w;if(Q&&s&&e.manuallyAnimateOnMount&&(Q=!1),g.protectedKeys={...f},!g.isActive&&M===null||!y&&!g.prevProp||He(y)||typeof y=="boolean")continue;const Bt=tn(g.prevProp,y);let at=Bt||p===r&&g.isActive&&!Q&&w||v>m&&w,jt=!1;const kt=Array.isArray(y)?y:[y];let $=kt.reduce(o(p),{});M===!1&&($={});const{prevResolvedValues:It={}}=g,Li={...It,...$},Ft=V=>{at=!0,d.has(V)&&(jt=!0,d.delete(V)),g.needsAnimating[V]=!0;const D=e.getValue(V);D&&(D.liveStyle=!1)};for(const V in Li){const D=$[V],k=It[V];if(f.hasOwnProperty(V))continue;let U=!1;Nt(D)&&Nt(k)?U=!mi(D,k):U=D!==k,U?D!=null?Ft(V):d.add(V):D!==void 0&&d.has(V)?Ft(V):g.protectedKeys[V]=!0}g.prevProp=y,g.prevResolvedValues=$,g.isActive&&(f={...f,...$}),s&&e.blockInitialAnimation&&(at=!1);const Ot=Q&&Bt;at&&(!Ot||jt)&&h.push(...kt.map(V=>{const D={type:p};if(typeof V=="string"&&s&&!Ot&&e.manuallyAnimateOnMount&&e.parent){const{parent:k}=e,U=ut(k,V);if(k.enteringChildren&&U){const{delayChildren:Mi}=U.transition||{};D.delay=Ii(k.enteringChildren,e,Mi)}}return{animation:V,options:D}}))}if(d.size){const v={};if(typeof u.initial!="boolean"){const p=ut(e,Array.isArray(u.initial)?u.initial[0]:u.initial);p&&p.transition&&(v.transition=p.transition)}d.forEach(p=>{const g=e.getBaseTarget(p),y=e.getValue(p);y&&(y.liveStyle=!0),v[p]=g??null}),h.push({animation:v})}let x=!!h.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(h):Promise.resolve()}function a(r,u){if(i[r].isActive===u)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(r,u)),i[r].isActive=u;const c=n(r);for(const h in i)i[h].protectedKeys={};return c}return{animateChanges:n,setActive:a,setAnimateFunction:l,getState:()=>i,reset:()=>{i=ie()}}}function tn(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!mi(t,e):!1}function I(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ie(){return{animate:I(!0),whileInView:I(),whileHover:I(),whileTap:I(),whileDrag:I(),whileFocus:I(),exit:I()}}class j{constructor(t){this.isMounted=!1,this.node=t}update(){}}class en extends j{constructor(t){super(t),t.animationState||(t.animationState=Qs(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();He(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let sn=0;class nn extends j{constructor(){super(...arguments),this.id=sn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);i&&!t&&o.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const on={animation:{Feature:en},exit:{Feature:nn}};function Z(e,t,i,s={passive:!0}){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i)}function J(e){return{point:{x:e.pageX,y:e.pageY}}}const rn=e=>t=>Mt(t)&&e(t,J(t));function X(e,t,i,s){return Z(e,t,rn(i),s)}const yi=1e-4,an=1-yi,ln=1+yi,vi=.01,un=0-vi,cn=0+vi;function A(e){return e.max-e.min}function hn(e,t,i){return Math.abs(e-t)<=i}function se(e,t,i,s=.5){e.origin=s,e.originPoint=T(t.min,t.max,e.origin),e.scale=A(i)/A(t),e.translate=T(i.min,i.max,e.origin)-e.originPoint,(e.scale>=an&&e.scale<=ln||isNaN(e.scale))&&(e.scale=1),(e.translate>=un&&e.translate<=cn||isNaN(e.translate))&&(e.translate=0)}function Y(e,t,i,s){se(e.x,t.x,i.x,s?s.originX:void 0),se(e.y,t.y,i.y,s?s.originY:void 0)}function ne(e,t,i){e.min=i.min+t.min,e.max=e.min+A(t)}function dn(e,t,i){ne(e.x,t.x,i.x),ne(e.y,t.y,i.y)}function oe(e,t,i){e.min=t.min-i.min,e.max=e.min+A(t)}function rt(e,t,i){oe(e.x,t.x,i.x),oe(e.y,t.y,i.y)}function E(e){return[e("x"),e("y")]}const xi=({current:e})=>e?e.ownerDocument.defaultView:null,re=(e,t)=>Math.abs(e-t);function fn(e,t){const i=re(e.x,t.x),s=re(e.y,t.y);return Math.sqrt(i**2+s**2)}class Pi{constructor(t,i,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:n=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=mt(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=fn(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!m)return;const{point:x}=d,{timestamp:v}=C;this.history.push({...x,timestamp:v});const{onStart:p,onMove:g}=this.handlers;f||(p&&p(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=pt(f,this.transformPagePoint),S.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=mt(d.type==="pointercancel"?this.lastMoveEventInfo:pt(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,p),x&&x(d,p)},!Mt(t))return;this.dragSnapToOrigin=l,this.handlers=i,this.transformPagePoint=s,this.distanceThreshold=n,this.contextWindow=o||window;const a=J(t),r=pt(a,this.transformPagePoint),{point:u}=r,{timestamp:c}=C;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=i;h&&h(t,mt(r,this.history)),this.removeListeners=ze(X(this.contextWindow,"pointermove",this.handlePointerMove),X(this.contextWindow,"pointerup",this.handlePointerUp),X(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),O(this.updatePoint)}}function pt(e,t){return t?{point:t(e.point)}:e}function ae(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mt({point:e},t){return{point:e,delta:ae(e,Ti(t)),offset:ae(e,pn(t)),velocity:mn(t,.1)}}function pn(e){return e[0]}function Ti(e){return e[e.length-1]}function mn(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,s=null;const o=Ti(e);for(;i>=0&&(s=e[i],!(o.timestamp-s.timestamp>Oi(t)));)i--;if(!s)return{x:0,y:0};const l=Ui(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const n={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return n.x===1/0&&(n.x=0),n.y===1/0&&(n.y=0),n}function gn(e,{min:t,max:i},s){return t!==void 0&&e<t?e=s?T(t,e,s.min):Math.max(e,t):i!==void 0&&e>i&&(e=s?T(i,e,s.max):Math.min(e,i)),e}function le(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function yn(e,{top:t,left:i,bottom:s,right:o}){return{x:le(e.x,i,o),y:le(e.y,t,s)}}function ue(e,t){let i=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,s]=[s,i]),{min:i,max:s}}function vn(e,t){return{x:ue(e.x,t.x),y:ue(e.y,t.y)}}function xn(e,t){let i=.5;const s=A(e),o=A(t);return o>s?i=Tt(t.min,t.max-s,e.min):s>o&&(i=Tt(e.min,e.max-o,t.min)),Xe(0,1,i)}function Pn(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const wt=.35;function Tn(e=wt){return e===!1?e=0:e===!0&&(e=wt),{x:ce(e,"left","right"),y:ce(e,"top","bottom")}}function ce(e,t,i){return{min:he(e,t),max:he(e,i)}}function he(e,t){return typeof e=="number"?e:e[t]||0}const Vn=new WeakMap;class Sn{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=P(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:i=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(J(h).point)},n=(h,d)=>{const{drag:f,dragPropagation:m,onDragStart:x}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ds(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),E(p=>{let g=this.getAxisMotionValue(p).get()||0;if(_.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[p];w&&(g=A(w)*(parseFloat(g)/100))}}this.originPoint[p]=g}),x&&S.postRender(()=>x(h,d)),Gt(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:x,onDrag:v}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:p}=d;if(m&&this.currentDirection===null){this.currentDirection=An(p),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,p),this.updateAxis("y",d.point,p),this.visualElement.render(),v&&v(h,d)},r=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>E(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Pi(t,{onSessionStart:l,onStart:n,onMove:a,onSessionEnd:r,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:s,contextWindow:xi(this.visualElement)})}stop(t,i){const s=t||this.latestPointerEvent,o=i||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:n}=o;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&S.postRender(()=>a(s,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,s){const{drag:o}=this.getProps();if(!s||!et(t,o,this.currentDirection))return;const l=this.getAxisMotionValue(t);let n=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(n=gn(n,this.constraints[t],this.elastic[t])),l.set(n)}resolveConstraints(){const{dragConstraints:t,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&tt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=yn(s.layoutBox,t):this.constraints=!1,this.elastic=Tn(i),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&E(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Pn(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!tt(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=Us(s,o.root,this.visualElement.getTransformPagePoint());let n=vn(o.layout.layoutBox,l);if(i){const a=i(Is(n));this.hasMutatedConstraints=!!a,a&&(n=ai(a))}return n}startAnimation(t){const{drag:i,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),r=this.constraints||{},u=E(c=>{if(!et(c,i,this.currentDirection))return;let h=r&&r[c]||{};n&&(h={min:0,max:0});const d=o?200:1e6,f=o?40:1e7,m={type:"inertia",velocity:s?t[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...l,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(u).then(a)}startAxisValueAnimation(t,i){const s=this.getAxisMotionValue(t);return Gt(this.visualElement,t),s.start(Oe(t,s,0,i,this.visualElement,!1))}stopAnimation(){E(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){E(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[i];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){E(i=>{const{drag:s}=this.getProps();if(!et(i,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(i);if(o&&o.layout){const{min:n,max:a}=o.layout.layoutBox[i];l.set(t[i]-T(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!tt(i)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};E(n=>{const a=this.getAxisMotionValue(n);if(a&&this.constraints!==!1){const r=a.get();o[n]=xn({min:r,max:r},this.constraints[n])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),E(n=>{if(!et(n,t,null))return;const a=this.getAxisMotionValue(n),{min:r,max:u}=this.constraints[n];a.set(T(r,u,o[n]))})}addListeners(){if(!this.visualElement.current)return;Vn.set(this.visualElement,this);const t=this.visualElement.current,i=X(t,"pointerdown",r=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(r)}),s=()=>{const{dragConstraints:r}=this.getProps();tt(r)&&r.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),S.read(s);const n=Z(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",(({delta:r,hasLayoutChanged:u})=>{this.isDragging&&u&&(E(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=r[c].translate,h.set(h.get()+r[c].translate))}),this.visualElement.render())}));return()=>{n(),i(),l(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:n=wt,dragMomentum:a=!0}=t;return{...t,drag:i,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:n,dragMomentum:a}}}function et(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function An(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class Cn extends j{constructor(t){super(t),this.removeGroupControls=W,this.removeListeners=W,this.controls=new Sn(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||W}unmount(){this.removeGroupControls(),this.removeListeners()}}const de=e=>(t,i)=>{e&&S.postRender(()=>e(t,i))};class wn extends j{constructor(){super(...arguments),this.removePointerDownListener=W}onPointerDown(t){this.session=new Pi(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xi(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:de(t),onStart:de(i),onMove:s,onEnd:(l,n)=>{delete this.session,o&&S.postRender(()=>o(l,n))}}}mount(){this.removePointerDownListener=X(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const st={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fe(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const z={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Et.test(e))e=parseFloat(e);else return e;const i=fe(e,t.target.x),s=fe(e,t.target.y);return`${i}% ${s}%`}},Dn={correct:(e,{treeScale:t,projectionDelta:i})=>{const s=e,o=H.parse(e);if(o.length>5)return s;const l=H.createTransformer(e),n=typeof o[0]!="number"?1:0,a=i.x.scale*t.x,r=i.y.scale*t.y;o[0+n]/=a,o[1+n]/=r;const u=T(a,r,.5);return typeof o[2+n]=="number"&&(o[2+n]/=u),typeof o[3+n]=="number"&&(o[3+n]/=u),l(o)}};let gt=!1;class En extends nt.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=t;hs(bn),l&&(i.group&&i.group.add(l),s&&s.register&&o&&s.register(l),gt&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),st.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:s,drag:o,isPresent:l}=this.props,{projection:n}=s;return n&&(n.isPresent=l,gt=!0,o||t.layoutDependency!==i||i===void 0||t.isPresent!==l?n.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?n.promote():n.relegate()||S.postRender(()=>{const a=n.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Lt.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:o}=t;gt=!0,o&&(o.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Vi(e){const[t,i]=ps(),s=nt.useContext(ls);return us.jsx(En,{...e,layoutGroup:s,switchLayoutGroup:nt.useContext(cs),isPresent:t,safeToRemove:i})}const bn={borderRadius:{...z,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomLeftRadius:z,borderBottomRightRadius:z,boxShadow:Dn};function Rn(e,t,i){const s=B(e)?e:q(e);return s.start(Oe("",s,t,i)),s.animation}const Ln=(e,t)=>e.depth-t.depth;class Mn{constructor(){this.children=[],this.isDirty=!1}add(t){Ye(this.children,t),this.isDirty=!0}remove(t){_e(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ln),this.isDirty=!1,this.children.forEach(t)}}function Bn(e,t){const i=bt.now(),s=({timestamp:o})=>{const l=o-i;l>=t&&(O(s),e(l-t))};return S.setup(s,!0),()=>O(s)}const Si=["TopLeft","TopRight","BottomLeft","BottomRight"],jn=Si.length,pe=e=>typeof e=="string"?parseFloat(e):e,me=e=>typeof e=="number"||Et.test(e);function kn(e,t,i,s,o,l){o?(e.opacity=T(0,i.opacity??1,In(s)),e.opacityExit=T(t.opacity??1,0,Fn(s))):l&&(e.opacity=T(t.opacity??1,i.opacity??1,s));for(let n=0;n<jn;n++){const a=`border${Si[n]}Radius`;let r=ge(t,a),u=ge(i,a);if(r===void 0&&u===void 0)continue;r||(r=0),u||(u=0),r===0||u===0||me(r)===me(u)?(e[a]=Math.max(T(pe(r),pe(u),s),0),(_.test(u)||_.test(r))&&(e[a]+="%")):e[a]=u}(t.rotate||i.rotate)&&(e.rotate=T(t.rotate||0,i.rotate||0,s))}function ge(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const In=Ai(0,.5,Ni),Fn=Ai(.5,.95,W);function Ai(e,t,i){return s=>s<e?0:s>t?1:i(Tt(e,t,s))}function ye(e,t){e.min=t.min,e.max=t.max}function b(e,t){ye(e.x,t.x),ye(e.y,t.y)}function ve(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function xe(e,t,i,s,o){return e-=t,e=ot(e,1/i,s),o!==void 0&&(e=ot(e,1/o,s)),e}function On(e,t=0,i=1,s=.5,o,l=e,n=e){if(_.test(t)&&(t=parseFloat(t),t=T(n.min,n.max,t/100)-n.min),typeof t!="number")return;let a=T(l.min,l.max,s);e===l&&(a-=t),e.min=xe(e.min,t,i,a,o),e.max=xe(e.max,t,i,a,o)}function Pe(e,t,[i,s,o],l,n){On(e,t[i],t[s],t[o],t.scale,l,n)}const Un=["x","scaleX","originX"],Nn=["y","scaleY","originY"];function Te(e,t,i,s){Pe(e.x,t,Un,i?i.x:void 0,s?s.x:void 0),Pe(e.y,t,Nn,i?i.y:void 0,s?s.y:void 0)}function Ve(e){return e.translate===0&&e.scale===1}function Ci(e){return Ve(e.x)&&Ve(e.y)}function Se(e,t){return e.min===t.min&&e.max===t.max}function Gn(e,t){return Se(e.x,t.x)&&Se(e.y,t.y)}function Ae(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wi(e,t){return Ae(e.x,t.x)&&Ae(e.y,t.y)}function Ce(e){return A(e.x)/A(e.y)}function we(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Kn{constructor(){this.members=[]}add(t){Ye(this.members,t),t.scheduleRender()}remove(t){if(_e(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(o=>t===o);if(i===0)return!1;let s;for(let o=i;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(t,i){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,i&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:s}=t;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wn(e,t,i){let s="";const o=e.x.translate/t.x,l=e.y.translate/t.y,n=i?.z||0;if((o||l||n)&&(s=`translate3d(${o}px, ${l}px, ${n}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:m}=i;u&&(s=`perspective(${u}px) ${s}`),c&&(s+=`rotate(${c}deg) `),h&&(s+=`rotateX(${h}deg) `),d&&(s+=`rotateY(${d}deg) `),f&&(s+=`skewX(${f}deg) `),m&&(s+=`skewY(${m}deg) `)}const a=e.x.scale*t.x,r=e.y.scale*t.y;return(a!==1||r!==1)&&(s+=`scale(${a}, ${r})`),s||"none"}const yt=["","X","Y","Z"],Hn=1e3;let $n=0;function vt(e,t,i,s){const{latestValues:o}=t;o[e]&&(i[e]=o[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Di(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=Ki(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:o,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",S,!(o||l))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Di(s)}function Ei({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(n={},a=t?.()){this.id=$n++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Yn),this.nodes.forEach(Jn),this.nodes.forEach(Qn),this.nodes.forEach(_n)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mn)}addEventListener(n,a){return this.eventHandlers.has(n)||this.eventHandlers.set(n,new Ne),this.eventHandlers.get(n).add(a)}notifyListeners(n,...a){const r=this.eventHandlers.get(n);r&&r.notify(...a)}hasListeners(n){return this.eventHandlers.has(n)}mount(n){if(this.instance)return;this.isSVG=ri(n)&&!Bs(n),this.instance=n;const{layoutId:a,layout:r,visualElement:u}=this.options;if(u&&!u.current&&u.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||a)&&(this.isLayoutDirty=!0),e){let c,h=0;const d=()=>this.root.updateBlockedByResize=!1;S.read(()=>{h=window.innerWidth}),e(n,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,c&&c(),c=Bn(d,250),st.hasAnimatedSinceResize&&(st.hasAnimatedSinceResize=!1,this.nodes.forEach(be)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||r)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||no,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),p=!this.targetLayout||!wi(this.targetLayout,f),g=!h&&d;if(this.options.layoutRoot||this.resumeFrom||g||h&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...Gi(m,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(c,g)}else h||be(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const n=this.getStack();n&&n.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),O(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(to),this.animationId++)}getTransformTemplate(){const{visualElement:n}=this.options;return n&&n.getProps().transformTemplate}willUpdate(n=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Di(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:r}=this.options;if(a===void 0&&!r)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),n&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(De);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ee);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Zn),this.nodes.forEach(zn),this.nodes.forEach(Xn)):this.nodes.forEach(Ee),this.clearAllSnapshots();const a=bt.now();C.delta=Xe(0,1e3/60,a-C.timestamp),C.timestamp=a,C.isProcessing=!0,ct.update.process(C),ct.preRender.process(C),ct.render.process(C),C.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lt.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qn),this.sharedNodes.forEach(eo)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,S.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){S.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!A(this.snapshot.measuredBox.x)&&!A(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++)this.path[r].updateScroll();const n=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=P(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,n?n.layoutBox:void 0)}updateScroll(n="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===n&&(a=!1),a&&this.instance){const r=s(this.instance);this.scroll={animationId:this.root.animationId,phase:n,isRoot:r,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:r}}}resetTransform(){if(!o)return;const n=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Ci(this.projectionDelta),r=this.getTransformTemplate(),u=r?r(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;n&&this.instance&&(a||F(this.latestValues)||c)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(n=!0){const a=this.measurePageBox();let r=this.removeElementScroll(a);return n&&(r=this.removeTransform(r)),oo(r),{animationId:this.root.animationId,measuredBox:a,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:n}=this.options;if(!n)return P();const a=n.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ro))){const{scroll:u}=this.root;u&&(N(a.x,u.offset.x),N(a.y,u.offset.y))}return a}removeElementScroll(n){const a=P();if(b(a,n),this.scroll?.wasRoot)return a;for(let r=0;r<this.path.length;r++){const u=this.path[r],{scroll:c,options:h}=u;u!==this.root&&c&&h.layoutScroll&&(c.wasRoot&&b(a,n),N(a.x,c.offset.x),N(a.y,c.offset.y))}return a}applyTransform(n,a=!1){const r=P();b(r,n);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&G(r,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),F(c.latestValues)&&G(r,c.latestValues)}return F(this.latestValues)&&G(r,this.latestValues),r}removeTransform(n){const a=P();b(a,n);for(let r=0;r<this.path.length;r++){const u=this.path[r];if(!u.instance||!F(u.latestValues))continue;St(u.latestValues)&&u.updateSnapshot();const c=P(),h=u.measurePageBox();b(c,h),Te(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return F(this.latestValues)&&Te(a,this.latestValues),a}setTargetDelta(n){this.targetDelta=n,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(n){this.options={...this.options,...n,crossfade:n.crossfade!==void 0?n.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==C.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(n=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const r=!!this.resumingFrom||this!==a;if(!(n||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!this.layout||!(c||h))return;this.resolvedRelativeTargetAt=C.timestamp;const d=this.getClosestProjectingParent();d&&this.linkedParentVersion!==d.layoutVersion&&!d.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(d&&d.layout?this.createRelativeTarget(d,this.layout.layoutBox,d.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=P(),this.targetWithTransforms=P()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dn(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):b(this.target,this.layout.layoutBox),ui(this.target,this.targetDelta)):b(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?this.createRelativeTarget(d,this.target,d.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||St(this.parent.latestValues)||li(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(n,a,r){this.relativeParent=n,this.linkedParentVersion=n.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),rt(this.relativeTargetOrigin,a,r),b(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const n=this.getLead(),a=!!this.resumingFrom||this!==n;let r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===C.timestamp&&(r=!1),r)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;b(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;Os(this.layoutCorrected,this.treeScale,this.path,a),n.layout&&!n.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=P());const{target:f}=n;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ve(this.prevProjectionDelta.x,this.projectionDelta.x),ve(this.prevProjectionDelta.y,this.projectionDelta.y)),Y(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!we(this.projectionDelta.x,this.prevProjectionDelta.x)||!we(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(n=!0){if(this.options.visualElement?.scheduleRender(),n){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=K(),this.projectionDelta=K(),this.projectionDeltaWithTransform=K()}setAnimationOrigin(n,a=!1){const r=this.snapshot,u=r?r.latestValues:{},c={...this.latestValues},h=K();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=P(),f=r?r.source:void 0,m=this.layout?this.layout.source:void 0,x=f!==m,v=this.getStack(),p=!v||v.members.length<=1,g=!!(x&&!p&&this.options.crossfade===!0&&!this.path.some(so));this.animationProgress=0;let y;this.mixTargetDelta=w=>{const M=w/1e3;Re(h.x,n.x,M),Re(h.y,n.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rt(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),io(this.relativeTarget,this.relativeTargetOrigin,d,M),y&&Gn(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=P()),b(y,this.relativeTarget)),x&&(this.animationValues=c,kn(c,u,this.latestValues,M,g,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(n){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(O(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=S.update(()=>{st.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=q(0)),this.currentAnimation=Rn(this.motionValue,[0,1e3],{...n,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),n.onUpdate&&n.onUpdate(a)},onStop:()=>{},onComplete:()=>{n.onComplete&&n.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const n=this.getStack();n&&n.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const n=this.getLead();let{targetWithTransforms:a,target:r,layout:u,latestValues:c}=n;if(!(!a||!r||!u)){if(this!==n&&this.layout&&u&&bi(this.options.animationType,this.layout.layoutBox,u.layoutBox)){r=this.target||P();const h=A(this.layout.layoutBox.x);r.x.min=n.target.x.min,r.x.max=r.x.min+h;const d=A(this.layout.layoutBox.y);r.y.min=n.target.y.min,r.y.max=r.y.min+d}b(a,r),G(a,c),Y(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(n,a){this.sharedNodes.has(n)||this.sharedNodes.set(n,new Kn),this.sharedNodes.get(n).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const n=this.getStack();return n?n.lead===this:!0}getLead(){const{layoutId:n}=this.options;return n?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:n}=this.options;return n?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:n}=this.options;if(n)return this.root.sharedNodes.get(n)}promote({needsReset:n,transition:a,preserveFollowOpacity:r}={}){const u=this.getStack();u&&u.promote(this,r),n&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const n=this.getStack();return n?n.relegate(this):!1}resetSkewAndRotation(){const{visualElement:n}=this.options;if(!n)return;let a=!1;const{latestValues:r}=n;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(a=!0),!a)return;const u={};r.z&&vt("z",n,u,this.animationValues);for(let c=0;c<yt.length;c++)vt(`rotate${yt[c]}`,n,u,this.animationValues),vt(`skew${yt[c]}`,n,u,this.animationValues);n.render();for(const c in u)n.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);n.scheduleRender()}applyProjectionStyles(n,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){n.visibility="hidden";return}const r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,n.visibility="",n.opacity="",n.pointerEvents=ht(a?.pointerEvents)||"",n.transform=r?r(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(n.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,n.pointerEvents=ht(a?.pointerEvents)||""),this.hasProjected&&!F(this.latestValues)&&(n.transform=r?r({},""):"none",this.hasProjected=!1);return}n.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Wn(this.projectionDeltaWithTransform,this.treeScale,c);r&&(h=r(c,h)),n.transform=h;const{x:d,y:f}=this.projectionDelta;n.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,u.animationValues?n.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:n.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const m in Wt){if(c[m]===void 0)continue;const{correct:x,applyTo:v,isCSSVariable:p}=Wt[m],g=h==="none"?c[m]:x(c[m],u);if(v){const y=v.length;for(let w=0;w<y;w++)n[v[w]]=g}else p?this.options.visualElement.renderState.vars[m]=g:n[m]=g}this.options.layoutId&&(n.pointerEvents=u===this?ht(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(n=>n.currentAnimation?.stop()),this.root.nodes.forEach(De),this.root.sharedNodes.clear()}}}function zn(e){e.updateLayout()}function Xn(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:o}=e.options,l=t.source!==e.layout.source;o==="size"?E(c=>{const h=l?t.measuredBox[c]:t.layoutBox[c],d=A(h);h.min=i[c].min,h.max=h.min+d}):bi(o,t.layoutBox,i)&&E(c=>{const h=l?t.measuredBox[c]:t.layoutBox[c],d=A(i[c]);h.max=h.min+d,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+d)});const n=K();Y(n,i,t.layoutBox);const a=K();l?Y(a,e.applyTransform(s,!0),t.measuredBox):Y(a,i,t.layoutBox);const r=!Ci(n);let u=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:h,layout:d}=c;if(h&&d){const f=P();rt(f,t.layoutBox,h.layoutBox);const m=P();rt(m,i,d.layoutBox),wi(f,m)||(u=!0),c.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=f,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:a,layoutDelta:n,hasLayoutChanged:r,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function Yn(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _n(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qn(e){e.clearSnapshot()}function De(e){e.clearMeasurements()}function Ee(e){e.isLayoutDirty=!1}function Zn(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function be(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Jn(e){e.resolveTargetDelta()}function Qn(e){e.calcProjection()}function to(e){e.resetSkewAndRotation()}function eo(e){e.removeLeadSnapshot()}function Re(e,t,i){e.translate=T(t.translate,0,i),e.scale=T(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function Le(e,t,i,s){e.min=T(t.min,i.min,s),e.max=T(t.max,i.max,s)}function io(e,t,i,s){Le(e.x,t.x,i.x,s),Le(e.y,t.y,i.y,s)}function so(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const no={duration:.45,ease:[.4,0,.1,1]},Me=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Be=Me("applewebkit/")&&!Me("chrome/")?Math.round:W;function je(e){e.min=Be(e.min),e.max=Be(e.max)}function oo(e){je(e.x),je(e.y)}function bi(e,t,i){return e==="position"||e==="preserve-aspect"&&!hn(Ce(t),Ce(i),.2)}function ro(e){return e!==e.root&&e.scroll?.wasRoot}const ao=Ei({attachResizeListener:(e,t)=>Z(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xt={current:void 0},Ri=Ei({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xt.current){const e=new ao({});e.mount(window),e.setOptions({layoutScroll:!0}),xt.current=e}return xt.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lo={pan:{Feature:wn},drag:{Feature:Cn,ProjectionNode:Ri,MeasureLayout:Vi}};function ke(e,t,i){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",i==="Start");const o="onHover"+i,l=s[o];l&&S.postRender(()=>l(t,J(t)))}class uo extends j{mount(){const{current:t}=this.node;t&&(this.unmount=Es(t,(i,s)=>(ke(this.node,s,"Start"),o=>ke(this.node,o,"End"))))}unmount(){}}class co extends j{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ze(Z(this.node.current,"focus",()=>this.onFocus()),Z(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ie(e,t,i){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",i==="Start");const o="onTap"+(i==="End"?"":i),l=s[o];l&&S.postRender(()=>l(t,J(t)))}class ho extends j{mount(){const{current:t}=this.node;t&&(this.unmount=Ms(t,(i,s)=>(Ie(this.node,s,"Start"),(o,{success:l})=>Ie(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dt=new WeakMap,Pt=new WeakMap,fo=e=>{const t=Dt.get(e.target);t&&t(e)},po=e=>{e.forEach(fo)};function mo({root:e,...t}){const i=e||document;Pt.has(i)||Pt.set(i,{});const s=Pt.get(i),o=JSON.stringify(t);return s[o]||(s[o]=new IntersectionObserver(po,{root:e,...t})),s[o]}function go(e,t,i){const s=mo(t);return Dt.set(e,i),s.observe(e),()=>{Dt.delete(e),s.unobserve(e)}}const yo={some:0,all:1};class vo extends j{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:s,amount:o="some",once:l}=t,n={root:i?i.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:yo[o]},a=r=>{const{isIntersecting:u}=r;if(this.isInView===u||(this.isInView=u,l&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(r)};return go(this.node.current,n,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(xo(t,i))&&this.startObserver()}unmount(){}}function xo({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const Po={inView:{Feature:vo},tap:{Feature:ho},focus:{Feature:co},hover:{Feature:uo}},To={layout:{ProjectionNode:Ri,MeasureLayout:Vi}},Vo={renderer:Ys,...on,...Po},Eo={...Vo,...lo,...To};export{Eo as default};
