# =============================================================================
# {{API_DISPLAY_NAME_UPPER}} DATAVERSE API - ENVIRONMENT EXAMPLE
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# This file is committed to git as a template for developers
# =============================================================================

# -----------------------------------------------------------------------------
# 1. CORE APPLICATION
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT={{PORT}}
LOG_LEVEL=log,error,warn,debug,verbose
SERVER_URL=http://localhost:{{PORT}}
LISTEN_ON=0.0.0.0
API_PREFIX=api

# Exclude null/undefined values from JSON responses (default: true)
# Set to 'false' to include null values in API responses
EXCLUDE_NULL_VALUES=true

# -----------------------------------------------------------------------------
# 2. DATA SOURCE - Microsoft Dataverse
# -----------------------------------------------------------------------------
DATAVERSE_URL=https://your-org.crm.dynamics.com
DATAVERSE_CLIENT_ID=your-client-id-here
DATAVERSE_CLIENT_SECRET=your-client-secret-here
DATAVERSE_TENANT_ID=your-tenant-id-here

# -----------------------------------------------------------------------------
# 3. AUTHENTICATION
# -----------------------------------------------------------------------------
# Supabase Configuration (for auth integration)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-key-here

# Auth Settings
DISABLE_AUTH=true

# -----------------------------------------------------------------------------
# 4. DATABASE - TypeORM Configuration (Future Use)
# -----------------------------------------------------------------------------
# Note: Currently not implemented, reserved for future direct DB access
DATABASE_CONNECTION=postgres
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=your-username
DATABASE_PASSWORD=your-password
DATABASE_DB_NAME=your-database
DATABASE_SCHEMA_NAME=public
DATABASE_POOL_SIZE=10
TYPE_ORM_LOGGER=advanced-console
TYPE_ORM_CACHE=false
TYPE_ORM_CACHE_DURATION=30000

# -----------------------------------------------------------------------------
# 5. TESTING
# -----------------------------------------------------------------------------
ENABLE_TEST_ENDPOINTS=true

# -----------------------------------------------------------------------------
# 6. RATE LIMITING / THROTTLING
# -----------------------------------------------------------------------------
# Limits number of requests per IP address to prevent abuse
# TTL is in milliseconds (60000 = 1 minute)
THROTTLE_PUBLIC=100           # Public endpoints: 100 requests per minute
THROTTLE_PUBLIC_TTL=60000     # Time window: 60 seconds
THROTTLE_PROTECTED=1000       # Protected endpoints: 1000 requests per minute
THROTTLE_PROTECTED_TTL=60000  # Time window: 60 seconds

# -----------------------------------------------------------------------------
# 7. CACHING
# -----------------------------------------------------------------------------
# Organizations cache TTL in milliseconds (300000 = 5 minutes)
# Used for similar name searches to reduce Dataverse API calls
ORGANIZATIONS_CACHE_TTL_MS=300000

# -----------------------------------------------------------------------------
# 8. SWAGGER / API DOCUMENTATION
# -----------------------------------------------------------------------------
SWAGGER_TITLE={{SWAGGER_TITLE}}
SWAGGER_DESCRIPTION={{API_DESCRIPTION}}
SWAGGER_VERSION=1.0
SWAGGER_TAG={{SWAGGER_TAG}}

# Testing Configuration
# Use mock Dataverse service for unit tests (faster, no external dependencies)
# Set to 'false' for integration tests that hit real Dataverse
USE_MOCK_DATAVERSE=true

# Enable test-only endpoints (DELETE operations, etc.)
# WARNING: Never enable in production
ENABLE_TEST_ENDPOINTS=false
